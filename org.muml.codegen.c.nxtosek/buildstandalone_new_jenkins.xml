<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="compile" name="org.muml.codegen.c.nxtOSEK">

	<property name="ECLIPSE_HOME"  value="/data/jenkins/jobs/Eclipse Target Platform/lastSuccessful/archive/targetPlatform" />
	<property name="ECLIPSE_WORKSPACE" value=".." />

	<property name="SOURCE_FOLDER" value="${basedir}/src/" />
	<property name="OUTPUT_FOLDER" value="${basedir}/bin/" />

	<path id="org.muml.codegen.c.nxtOSEK.classpath">
		<path refid="org.muml.codegen.c.nxtOSEK.libraryclasspath" />
	</path>

	<!-- The classpath with only the dependencies used by the project (a dependency with the parser is required) -->
	<path id="org.muml.codegen.c.nxtOSEK.libraryclasspath">
		<pathelement location="${ECLIPSE_WORKSPACE}/org.muml.codegen.c/bin" />
		<pathelement location="${ECLIPSE_WORKSPACE}/org.muml.codegen.c.nxtOSEK/bin" />
		<pathelement location="${ECLIPSE_WORKSPACE}/org.muml.codegen.c.beautifier/bin" />
		<pathelement location="${ECLIPSE_WORKSPACE}/org.storydriven.core/target/classes" />
		<pathelement location="${ECLIPSE_WORKSPACE}/de.uni_paderborn.fujaba.muml/bin" />
		<pathelement location="${ECLIPSE_WORKSPACE}/org.muml.core.modelinstance/bin" />
		<pathelement location="${ECLIPSE_WORKSPACE}/org.muml.pim.actionlanguage/bin" />
		<fileset dir="${ECLIPSE_HOME}/plugins/">
			<include name="*.jar" />
		</fileset>
	</path>


	<taskdef id="acceleoCompiler" name="acceleoCompiler" classname="org.eclipse.acceleo.parser.compiler.AcceleoCompiler" classpathref="org.muml.codegen.c.nxtOSEK.libraryclasspath">
	</taskdef>

	<!-- Change the value of the property SOURCE_FOLDERS to match the configuration of your project. -->
	<target name="compile">
		<acceleoCompiler	sourceFolder="${SOURCE_FOLDER}"
							outputFolder="${OUTPUT_FOLDER}"
							dependencies="${ECLIPSE_WORKSPACE}/org.muml.codegen.c/bin/de/uni_paderborn/fujaba/muml/codegen/c/"
							binaryResource="false" 
							packagesToRegister="de.uni_paderborn.fujaba.muml.MumlPackage;de.uni_paderborn.fujaba.muml.instance.InstancePackage;de.uni_paderborn.fujaba.muml.component.ComponentPackage;org.muml.pim.actionlanguage.ActionlanguagePackage;de.uni_paderborn.fujaba.muml.behavior.BehaviorPackage;org.storydriven.core.CorePackage;de.uni_paderborn.fujaba.muml.connector.ConnectorPackage;de.uni_paderborn.fujaba.muml.protocol.ProtocolPackage;de.uni_paderborn.fujaba.muml.realtimestatechart.RealtimestatechartPackage;org.muml.core.types.TypesPackage;de.uni_paderborn.fujaba.muml.valuetype.ValuetypePackage;org.muml.core.modelinstance.ModelinstancePackage;org.storydriven.core.expressions.ExpressionsPackage;org.storydriven.core.expressions.common.CommonExpressionsPackage">
		</acceleoCompiler>
	</target>
</project>
